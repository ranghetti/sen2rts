<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Fill not equally-spaced time series — fill_s2ts • sen2rts</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Fill not equally-spaced time series — fill_s2ts" />
<meta property="og:description" content="Fill temporal gaps in a time series smoothed with function
smooth_s2ts() to obtain homogeneous values (daily or with a regular
time step)." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sen2rts</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fas fa-file-code"></span>
     
     Reference
  </a>
</li>
<li>
  <a href="../articles/workflow.html">
    <span class="fas fa-book"></span>
     
     The sen2rts workflow
  </a>
</li>
<li>
  <a href="../news/index.html">
    <span class="fas fa-newspaper"></span>
     
     Changelog
  </a>
</li>
<li>
  <a href="http://luigi.ranghetti.info">
    <span class="fas fa-user"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/ranghetti/sen2rts/">
    <span class="fas fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Fill not equally-spaced time series</h1>
    <small class="dont-index">Source: <a href='https://github.com/ranghetti/sen2rts/blob/master/R/fill_s2ts.R'><code>R/fill_s2ts.R</code></a></small>
    <div class="hidden name"><code>fill_s2ts.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Fill temporal gaps in a time series smoothed with function
<code><a href='smooth_s2ts.html'>smooth_s2ts()</a></code> to obtain homogeneous values (daily or with a regular
time step).</p>
    </div>

    <pre class="usage"><span class='fu'>fill_s2ts</span><span class='op'>(</span>
  <span class='va'>ts</span>,
  frequency <span class='op'>=</span> <span class='st'>"daily"</span>,
  method <span class='op'>=</span> <span class='st'>"fmm"</span>,
  max_na_days <span class='op'>=</span> <span class='cn'>Inf</span>,
  max_extrapolation <span class='op'>=</span> <span class='fl'>0.1</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>ts</th>
      <td><p>Time series in <code>s2ts</code> format (generated using <code><a href='smooth_s2ts.html'>smooth_s2ts()</a></code>).</p></td>
    </tr>
    <tr>
      <th>frequency</th>
      <td><p>(optional) One of the followings:</p><ul>
<li><p><code>daily</code>: daily frequency (default);</p></li>
<li><p><code>dop</code> (Days Of Passage): values are returned corresponding to
the theoretic Sentinel-2 dates of passage.</p></li>
</ul></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>(optional) Argument passed to <code><a href='https://rdrr.io/r/stats/splinefun.html'>spline()</a></code>.</p></td>
    </tr>
    <tr>
      <th>max_na_days</th>
      <td><p>(optional) maximum number of consecutive days with missing
values which can be filled (in case of longer time windows with missing data,
NA are returned).
Default is to fit everything (unless this could lead to errors in case of
long NT time windows, currently it is the only way to get subsequent functions
working).</p></td>
    </tr>
    <tr>
      <th>max_extrapolation</th>
      <td><p>(optional) Numeric: maximum allowed extrapolation
out of original range (relative value).
Default is 0.1 (+10%). Set to Inf in order not to set any constraint.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The output time series in tabular format (see <code>extract_ts()</code>).</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Luigi Ranghetti, PhD (2020) <a href='mailto:luigi@ranghetti.info'>luigi@ranghetti.info</a></p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>#' # Load input data</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='st'>"ts_smoothed"</span><span class='op'>)</span>

<span class='co'># Gap filling using default parameters (daily)</span>
<span class='va'>ts_filled</span> <span class='op'>&lt;-</span> <span class='fu'>fill_s2ts</span><span class='op'>(</span><span class='va'>ts_smoothed</span><span class='op'>)</span>
<span class='va'>ts_filled</span> <span class='co'># standard print</span>
</div><div class='output co'>#&gt; An interpolated s2ts time series with 301 dates and 2 IDs.
#&gt;            Date Orbit Sensor         1            2   
#&gt;   1: 2020-01-04   022     2B 0.1160602 ○  0.1740709 ○ 
#&gt;   2: 2020-01-05  &lt;NA&gt;   &lt;NA&gt; 0.1207222 ~  0.1749062 ~ 
#&gt;   3: 2020-01-06  &lt;NA&gt;   &lt;NA&gt; 0.1247380 ~  0.1759228 ~ 
#&gt;   4: 2020-01-07  &lt;NA&gt;   &lt;NA&gt; 0.1281397 ~  0.1771040 ~ 
#&gt;   5: 2020-01-08  &lt;NA&gt;   &lt;NA&gt; 0.1309599 ~  0.1784328 ~ 
#&gt;  ---                                                  
#&gt; 297: 2020-10-26  &lt;NA&gt;   &lt;NA&gt;        NA ~         NA ~ 
#&gt; 298: 2020-10-27  &lt;NA&gt;   &lt;NA&gt;        NA ~         NA ~ 
#&gt; 299: 2020-10-28  &lt;NA&gt;   &lt;NA&gt;        NA ~         NA ~ 
#&gt; 300: 2020-10-29  &lt;NA&gt;   &lt;NA&gt;        NA ~         NA ~ 
#&gt; 301: 2020-10-30   022     2B        NA ~         NA ~ 
#&gt; 
#&gt; Quality flags:  ● [1]  ◕ [0.9,1)  ◑ [0.75,0.9)  ◔ [0.5,0.75)  ○ [0,0.5)
#&gt; Interpolated values are marked with "~".</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/as.data.frame.html'>as.data.frame</a></span><span class='op'>(</span><span class='va'>ts_filled</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># see content</span>
</div><div class='output co'>#&gt;   id       date orbit sensor     value   qa     rawval interpolated
#&gt; 1  1 2020-01-04   022     2B 0.1160602 0.33 0.11613333        FALSE
#&gt; 2  1 2020-01-05  &lt;NA&gt;   &lt;NA&gt; 0.1207222   NA         NA         TRUE
#&gt; 3  1 2020-01-06  &lt;NA&gt;   &lt;NA&gt; 0.1247380   NA         NA         TRUE
#&gt; 4  1 2020-01-07  &lt;NA&gt;   &lt;NA&gt; 0.1281397   NA         NA         TRUE
#&gt; 5  1 2020-01-08  &lt;NA&gt;   &lt;NA&gt; 0.1309599   NA         NA         TRUE
#&gt; 6  1 2020-01-09   022     2A 0.1332310 0.00 0.02017083         TRUE</div><div class='input'><span class='fu'><a href='plot.html'>plot</a></span><span class='op'>(</span><span class='va'>ts_filled</span><span class='op'>)</span>
</div><div class='img'><img src='fill_s2ts-1.png' alt='' width='864' height='432' /></div><div class='input'>
<span class='co'># Generate a regular time series using the minimum number of required records</span>
<span class='va'>ts_filled_2</span> <span class='op'>&lt;-</span> <span class='fu'>fill_s2ts</span><span class='op'>(</span><span class='va'>ts_smoothed</span>, frequency <span class='op'>=</span> <span class='st'>"dop"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>ts_filled_2</span>, topn <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span> <span class='co'># standard print</span>
</div><div class='output co'>#&gt; An interpolated s2ts time series with 61 dates and 2 IDs.
#&gt;           Date Orbit Sensor          1             2   
#&gt;  1: 2020-01-04   022     2B 0.11606015 ○  0.17407087 ○ 
#&gt;  2: 2020-01-09   022     2A 0.13323097 ~  0.17989257 ~ 
#&gt;  3: 2020-01-14   022     2B 0.13748313 ~  0.18856602 ~ 
#&gt;  4: 2020-01-19   022     2A 0.13286728 ~  0.19798907 ~ 
#&gt;  5: 2020-01-24   022     2B 0.12343408 ○  0.20605959 ○ 
#&gt; ---                                                    
#&gt; 57: 2020-10-10   022     2B 0.05760022 ○  0.10211348 ○ 
#&gt; 58: 2020-10-15   022     2A 0.04666769 ~  0.09472827 ~ 
#&gt; 59: 2020-10-20   022     2B 0.05767390 ○  0.10161563 ○ 
#&gt; 60: 2020-10-25   022     2A         NA ~          NA ~ 
#&gt; 61: 2020-10-30   022     2B         NA ~          NA ~ 
#&gt; 
#&gt; Quality flags:  ● [1]  ◕ [0.9,1)  ◑ [0.75,0.9)  ◔ [0.5,0.75)  ○ [0,0.5)
#&gt; Interpolated values are marked with "~".</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Luigi Ranghetti.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


